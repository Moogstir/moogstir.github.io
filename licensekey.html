<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>

	<script async src="https://www.googletagmanager.com/gtag/js?id=G-T9DS3YHVV6"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-T9DS3YHVV6');
	</script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>License Status | Novelative</title>
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="theme.js"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="styles.css">
    
    <style>
        .key-container:hover {
            border-color: rgb(var(--color-app-highlight));
            box-shadow: 0 0 15px rgba(var(--color-app-highlight), 0.2);
        }
        
        /* Popup Bubble for "Copied!" */
        .popup-bubble {
            visibility: hidden; width: 80px; background-color: #10B981; color: #fff; text-align: center; border-radius: 6px; padding: 5px 0;
            position: absolute; z-index: 10; top: -40px; left: 50%; transform: translateX(-50%); opacity: 0; transition: all 0.3s;
            font-size: 12px; pointer-events: none; font-weight: bold;
        }
        .popup-bubble::after {
            content: ""; position: absolute; top: 100%; left: 50%; margin-left: -5px; border-width: 5px; border-style: solid; border-color: #10B981 transparent transparent transparent;
        }
        .show-popup { visibility: visible; opacity: 1; top: -45px; }
    </style>
</head>
<body style="user-select: none;" class="bg-app-bg text-app-text font-sans antialiased overflow-x-hidden flex flex-col min-h-screen">

    <nav class="fixed w-full z-50 bg-app-bg/95 backdrop-blur-md border-b border-app-border">
        <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
            <a href="index.html" class="flex items-center gap-2">
                <img id="app-logo" src="./assets/darkmodeicon.png" class="w-7">
                <span class="font-serif text-2xl font-bold tracking-wide">Novelative</span>
            </a>
            <div class="hidden md:flex gap-8 text-sm font-medium text-app-muted">
                <a href="index.html" class="hover:text-app-text transition-colors">Home</a>
                <a href="features.html" class="hover:text-app-text transition-colors">Features</a>
                <a href="download.html" class="hover:text-app-text transition-colors">Download</a>
            </div>
            <div class="flex items-center">
                <button id="theme-toggle" class="mr-4 p-2 rounded-full text-app-muted hover:text-app-text transition-colors focus:outline-none" aria-label="Toggle Dark Mode">
                    <i class="fa-solid fa-sun"></i>
                </button>
                <a href="download.html" class="bg-app-highlight/10 border border-app-highlight text-app-highlight hover:bg-app-highlight hover:text-app-bg px-5 py-2 rounded-md font-semibold transition-all">
                    Download Free
                </a>
            </div>
        </div>
    </nav>

    <main class="flex-grow relative flex items-center justify-center pt-32 pb-24">
        
        <canvas id="graphCanvas" class="absolute inset-0 z-0 opacity-50 pointer-events-none"></canvas>
        <div class="absolute inset-0 bg-gradient-to-b from-transparent via-app-bg/50 to-app-bg z-0 pointer-events-none"></div>

        <div class="relative z-10 max-w-4xl mx-auto px-6 w-full text-center">
            
            <div id="successContent" class="hidden">
                <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-8 fade-in-up">
                    <i class="fa-solid fa-check text-4xl text-green-500"></i>
                </div>

                <h1 class="font-serif text-4xl md:text-6xl font-bold mb-6 fade-in-up" style="transition-delay: 100ms;">
                    You're In.
                </h1>
                <p class="text-xl text-app-muted max-w-2xl mx-auto mb-12 fade-in-up" style="transition-delay: 200ms;">
                    Thank you for purchasing Novelative. Your journey to a finished manuscript begins now.
                </p>

                <div class="fade-in-up flex flex-col items-center justify-center gap-4 relative" style="transition-delay: 300ms;">
                    
                    <p class="text-sm uppercase tracking-widest font-bold text-app-highlight mb-2">Click below to copy your key</p>
                    
                    <div class="flex items-center gap-4 w-full justify-center">
                        <div onclick="copyLicenseKey(this)" id="keyBox" class="key-container relative bg-app-surface border-2 border-app-border rounded-lg px-8 py-5 cursor-pointer transition-all duration-300 group select-text">
                            <code id="licenseDisplay" class="font-mono text-2xl md:text-3xl font-bold text-app-text tracking-wider group-hover:text-app-highlight transition-colors">
                                ...
                            </code>
                            <div class="text-xs text-app-muted mt-2 group-hover:text-app-text transition-colors">
                                <i class="fa-regular fa-copy mr-1"></i> Tap to copy
                            </div>
                            
                            <span id="copyPopup" class="popup-bubble">Copied!</span>
                        </div>
                    </div>
                </div>

                <div id="nextSteps" class="mt-16 opacity-0 translate-y-4 transition-all duration-700 pointer-events-none max-w-2xl mx-auto bg-app-surface/50 border border-app-border rounded-xl p-8 backdrop-blur-sm">
                    <h3 class="text-2xl font-bold text-app-text mb-4">You're all set!</h3>
                    <p class="text-app-muted text-lg mb-6 leading-relaxed">
                        Now that your license key has been copied, launch the <strong>Novelative app</strong> on your computer and paste it into the activation window to unlock your full writing studio.
                    </p>
                    
                    <div class="flex flex-col sm:flex-row justify-center gap-4">
                        <a href="download.html" class="bg-app-bg border border-app-border hover:border-app-highlight text-app-text px-6 py-3 rounded-lg font-medium transition-all">
                            Don't have the app? Download here
                        </a>
                    </div>
                </div>
            </div>

            <div id="missingContent" class="hidden">
                <div class="w-20 h-20 bg-app-surface border border-app-border rounded-full flex items-center justify-center mx-auto mb-8 fade-in-up">
                    <i class="fa-regular fa-envelope text-4xl text-app-muted"></i>
                </div>

                <h1 class="font-serif text-4xl md:text-5xl font-bold mb-6 fade-in-up" style="transition-delay: 100ms;">
                    Check Your Email
                </h1>
                
                <p class="text-xl text-app-muted max-w-xl mx-auto mb-10 fade-in-up leading-relaxed" style="transition-delay: 200ms;">
                    We couldn't automatically detect a license key in this link. <br><br>
                    If you have purchased Novelative, please check your email inbox (and spam folder) for your receipt. Your license key will be listed there.
                </p>

                <div class="fade-in-up flex flex-col sm:flex-row gap-4 justify-center" style="transition-delay: 300ms;">
                    <a href="index.html" class="bg-app-highlight text-app-bg px-6 py-3 rounded-lg font-bold hover:bg-app-highlightHover transition-all">
                        Return Home
                    </a>
                    <a href="contact.html" class="bg-app-surface border border-app-border hover:border-app-highlight text-app-text px-6 py-3 rounded-lg font-medium transition-all">
                        Contact Support
                    </a>
                </div>
            </div>

        </div>
    </main>

    <footer class="bg-app-bg py-12 border-t border-app-border text-sm text-app-muted mt-auto">
        <div class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-4 gap-8">
            <div class="col-span-1 md:col-span-2">
                <div class="flex items-center gap-2 mb-4 text-app-text">
                    <img id="footer-logo" src="./assets/darkmodeicon.png" class="w-5 grayscale opacity-70" alt="Logo">
                    <span class="font-serif text-xl font-bold">Novelative</span>
                </div>
                <p class="max-w-xs mb-4">A powerful, offline-first writing studio designed for novelists and world-builders.</p>
                <p class="mb-4">Â© Novelative 2026</p> 
                <div class="flex gap-4">
                	<a href="https://discord.gg/XtXJhXDF3y" target="_blank" class="hover:text-app-text"><i class="fa-brands fa-discord text-lg"></i></a>
                </div>
            </div>
            <div>
                <h4 class="font-bold text-app-text mb-4">Product</h4>
                <ul class="space-y-2">
                    <li><a href="download.html" class="hover:text-app-text">Download</a></li>
                    <li><a href="purchase.html" class="hover:text-app-text">Pricing</a></li>
                </ul>
            </div>
            <div>
                <h4 class="font-bold text-app-text mb-4">Support</h4>
                <ul class="space-y-2">
                    <li><a href="contact.html" class="hover:text-app-text">Contact</a></li>
                    <li><a href="privacypolicy.html" class="hover:text-app-text">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
    </footer>

    <script>
        // 1. Check for License Key
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const licenseKey = urlParams.get('license_key');
            
            const successDiv = document.getElementById('successContent');
            const missingDiv = document.getElementById('missingContent');

            if (licenseKey) {
                // Key found: Show success, hide missing
                document.getElementById('licenseDisplay').innerText = licenseKey;
                successDiv.classList.remove('hidden');
            } else {
                // Key NOT found: Show missing, hide success
                missingDiv.classList.remove('hidden');
            }
        });

        // 2. Copy Logic
        function copyLicenseKey(element) {
            const displayEl = document.getElementById('licenseDisplay');
            const keyText = displayEl.innerText;
            
            navigator.clipboard.writeText(keyText).then(() => {
                
                // Show "Copied!" Bubble
                const popup = document.getElementById("copyPopup");
                popup.classList.add("show-popup");
                setTimeout(() => popup.classList.remove("show-popup"), 2000);

                // Change Border Color Temporarily
                element.classList.add('border-green-500');
                element.classList.remove('border-app-border');
                
                setTimeout(() => {
                    element.classList.remove('border-green-500');
                    element.classList.add('border-app-border');
                }, 500);

                // Reveal "Next Steps"
                revealNextSteps();

            }).catch(err => {
                console.error("Failed to copy", err);
                alert("Please manually select and copy the key.");
            });
        }

        function revealNextSteps() {
            const steps = document.getElementById('nextSteps');
            steps.classList.remove('opacity-0', 'translate-y-4', 'pointer-events-none');
            steps.classList.add('opacity-100', 'translate-y-0', 'pointer-events-auto');
        }

        // --- Standard Graph Background Animation ---
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];
        
        function getAccentColor() {
            const style = getComputedStyle(document.documentElement).getPropertyValue('--color-app-highlight').trim();
            return style ? `rgba(${style.split(' ').join(',')}, 1)` : 'rgba(251, 191, 36, 1)';
        }
        let accentColor = getAccentColor();
        window.addEventListener('themeChanged', () => { accentColor = getAccentColor(); });

        class Particle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.3;
                this.vy = (Math.random() - 0.5) * 0.3;
                this.size = Math.random() * 1.5 + 1;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > width) this.vx *= -1;
                if (this.y < 0 || this.y > height) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = accentColor;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }
        
        function resize() {
            width = window.innerWidth;
            height = Math.max(window.innerHeight, document.body.scrollHeight);
            canvas.width = width; canvas.height = height;
            particles = [];
            for (let i = 0; i < Math.floor(width / 25); i++) particles.push(new Particle());
        }
        window.addEventListener('resize', resize);
        
        function animate() {
            ctx.clearRect(0, 0, width, height);
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                for (let j = i; j < particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 100) {
                        ctx.beginPath();
                        const rgb = accentColor.replace('rgba(','').replace(')','').split(',').slice(0,3).join(',');
                        ctx.strokeStyle = `rgba(${rgb}, ${0.1 - distance/1000})`; 
                        ctx.lineWidth = 1;
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }

        // --- Scroll Reveal ---
        const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    obs.unobserve(entry.target);
                }
            });
        }, observerOptions);

        window.onload = function () {
            resize(); animate();
            document.querySelectorAll('.fade-in-up').forEach(el => observer.observe(el));
        }
    </script>
</body>
</html>